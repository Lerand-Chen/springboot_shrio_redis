<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.abroad.school.dao.ISchoolDao">

	<resultMap type="com.abroad.school.domain.School" id="school">
		<result property="id" column="id" />	
		<result property="schoolNameCh" column="school_name_ch" />	
		<result property="schoolNameEn" column="school_name_en" />	
		<result property="countryCode" column="country_code" />	
		<result property="provinceCode" column="province_code" />	
		<result property="cityCode" column="city_code" />	
		<result property="des" column="des" />	
	</resultMap>
	<sql id="insertKey">
		<trim suffixOverrides=","> 
				id,
			<if test='null != schoolNameCh and !schoolNameCh.equals("")'>
				school_name_ch,
			</if>
			<if test='null != schoolNameEn and !schoolNameEn.equals("")'>
				school_name_en,
			</if>
			<if test="null != countryCode">
				country_code,
			</if>
			<if test="null != provinceCode">
				province_code,
			</if>
			<if test="null != cityCode">
				city_code,
			</if>
			<if test='null != des and !des.equals("")'>
				des
			</if>
		</trim>
	</sql>
	<sql id="insertValue">
		<trim suffixOverrides=","> 
				#{id},
			<if test='null != schoolNameCh and !schoolNameCh.equals("")'>
				#{schoolNameCh},
			</if>
			<if test='null != schoolNameEn and !schoolNameEn.equals("")'>
				#{schoolNameEn},
			</if>
			<if test="null != countryCode">
				#{countryCode},
			</if>
			<if test="null != provinceCode">
				#{provinceCode},
			</if>
			<if test="null != cityCode">
				#{cityCode},
			</if>
			<if test='null != des and !des.equals("")'>
				#{des}
			</if>
		</trim>
	</sql>
<!-- 	根据id查询学校基本信息 -->
	<select id="findById" resultMap="school">
		select * from school where id = #{id}
	</select>
	
<!-- 	添加学校基本信息 -->
	<insert id="insert" keyProperty="id" useGeneratedKeys="true">
		insert into school (<include refid="insertKey"/>) values (<include refid="insertValue"/>)
	</insert>
	
<!-- 	修改账号 -->
	<update id="update">
		update school 
		<set>
			<trim suffixOverrides=","> 
			<if test='null != schoolNameCh and !schoolNameCh.equals("")'>
				school_name_ch = #{schoolNameCh},
			</if>
			<if test='null != schoolNameEn and !schoolNameEn.equals("")'>
				school_name_en = #{schoolNameEn},
			</if>
			<if test="null != countryCode">
				country_code = #{countryCode},
			</if>
			<if test="null != provinceCode">
				province_code = #{provinceCode},
			</if>
			<if test="null != cityCode">
				city_code = #{cityCode},
			</if>
			<if test='null != des and !des.equals("")'>
				des = #{des}
			</if>
		</trim>
		</set>
		where id = #{id}
	</update>
	
	<delete id="deleteById">
		delete from school where id = #{id}
	</delete>
</mapper>